<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cursor Trace Effect</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        overflow: hidden;
        cursor: none; /* Hide the default cursor */
      }

      svg {
        position: absolute;
        top: 0;
        left: 0;
      }

      #airplaneWrapper {
        position: absolute;
        transform: translate(-50%, -50%);
        pointer-events: none;
      }

      #airplaneCursor {
        position: relative;
        user-select: none; /* Prevent text selection when dragging */
        font-size: 20px;
        transition: transform 0.2s; /* Smooth transition for rotation */
        width: 20px; /* Width of the SVG */
        height: 20px; /* Height of the SVG */
      }

      #airplaneCursor svg {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(90deg);
      }
    </style>
  </head>

  <body>
    <svg id="cursorLineSVG" width="100%" height="100%"></svg>

    <!-- Airplane div structure -->
    <div id="airplaneWrapper">
      <div id="airplaneCursor">
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_63_31)">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M19.9346 12.1629L11.2263 5.69686C11.2913 4.69723 11.3343 2.46515 11.2968 2.05083C10.982 -1.4223 8.78925 0.0748811 8.76812 1.62502C8.76234 2.04899 8.68526 4.24196 8.67731 5.70607L0.0760134 12.3314L0.0521224 14.4042L8.93006 10.3471L9.24753 16.7925L6.6728 18.6352L6.65574 19.9916L10.0517 19.059L10.0523 19.0702L13.4828 19.945L13.4426 18.5898L10.8367 16.793L11.0497 10.3425L19.9926 14.2318L19.9346 12.1629Z"
              fill="black"
            />
          </g>
          <defs>
            <clipPath id="clip0_63_31">
              <rect width="20" height="20" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const svg = document.getElementById("cursorLineSVG");
        const airplaneWrapper = document.getElementById("airplaneWrapper");
        const airplaneCursor = document.getElementById("airplaneCursor");
        let lastPos = null;

        function createLineElement(x1, y1, x2, y2) {
          const ns = "http://www.w3.org/2000/svg";
          const line = document.createElementNS(ns, "line");
          line.setAttribute("x1", x1);
          line.setAttribute("y1", y1);
          line.setAttribute("x2", x2);
          line.setAttribute("y2", y2);
          line.setAttribute("stroke", "black");
          line.setAttribute("stroke-width", "1");
          line.style.opacity = "1";
          return line;
        }

        function startFading(line) {
          const fadeInterval = setInterval(() => {
            if (parseFloat(line.style.opacity) <= 0) {
              svg.removeChild(line);
              clearInterval(fadeInterval);
            } else {
              line.style.opacity = parseFloat(line.style.opacity) - 0.01;
            }
          }, 1); // Adjusted for desired fade speed
        }

        let lastAngle = 0;
        const threshold = 1; // Adjust this to change the sensitivity

        document.addEventListener("mousemove", (event) => {
          if (lastPos) {
            const dx = event.clientX - lastPos.x;
            const dy = event.clientY - lastPos.y;
            const diff = Math.sqrt(dx * dx + dy * dy);
            if (diff > threshold) {
              lastAngle = Math.atan2(dy, dx) * (180 / Math.PI);
            }
            // Update airplane div rotation and position
            airplaneWrapper.style.left = event.clientX + "px";
            airplaneWrapper.style.top = event.clientY + "px";
            airplaneCursor.style.transform = `rotate(${lastAngle}deg) scale(5)`;

            const line = createLineElement(
              lastPos.x,
              lastPos.y,
              event.clientX,
              event.clientY
            );
            svg.appendChild(line);
            startFading(line);
          }
          lastPos = { x: event.clientX, y: event.clientY };
        });
      });
    </script>
  </body>
</html>
